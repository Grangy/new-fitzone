# Руководство по управлению админ панелью FitZone

## Обзор

Админ панель FitZone предоставляет полный контроль над контентом сайта через веб-интерфейс. Все данные хранятся в SQLite базе данных и управляются через REST API.

## Доступ к админ панели

### URL админ панели
```
https://yourdomain.com/admin
```

### Данные для входа
- **Логин:** `admin`
- **Пароль:** `admin123`

⚠️ **ВАЖНО:** Смените пароль после первого входа!

## Структура админ панели

### 1. Главная панель (`/admin`)
- Общая статистика (количество клубов, тренеров, направлений)
- Быстрые действия для создания нового контента
- Навигация по разделам

### 2. Управление клубами (`/admin/clubs`)
- Просмотр всех клубов
- Добавление новых клубов
- Редактирование существующих клубов
- Удаление клубов

### 3. Управление тренерами (`/admin/trainers`)
- Просмотр всех тренеров
- Добавление новых тренеров
- Редактирование профилей тренеров
- Удаление тренеров

### 4. Управление направлениями (`/admin/directions`)
- Просмотр всех направлений
- Добавление новых направлений
- Редактирование направлений
- Удаление направлений

### 5. Настройки сайта (`/admin/settings`)
- Управление общей конфигурацией сайта
- SEO настройки
- Контактная информация
- Социальные сети

## Детальное руководство

### Управление клубами

#### Добавление нового клуба
1. Перейдите в раздел "Клубы" (`/admin/clubs`)
2. Нажмите кнопку "Добавить клуб"
3. Заполните форму:
   - **ID клуба:** уникальный идентификатор (например: `new-club`)
   - **Название:** отображаемое название клуба
   - **Адрес:** полный адрес клуба
   - **Телефон:** контактный телефон
   - **WhatsApp:** ссылка на WhatsApp
   - **Telegram:** ссылка на Telegram
   - **VK:** ссылка на VK
   - **Instagram:** ссылка на Instagram
   - **Описание:** краткое описание клуба
4. Нажмите "Создать клуб"

#### Редактирование клуба
1. В списке клубов нажмите "Редактировать"
2. Внесите необходимые изменения
3. Нажмите "Сохранить"

#### Удаление клуба
1. В списке клубов нажмите "Удалить"
2. Подтвердите удаление

### Управление тренерами

#### Добавление нового тренера
1. Перейдите в раздел "Тренеры" (`/admin/trainers`)
2. Нажмите кнопку "Добавить тренера"
3. Заполните форму:
   - **ID тренера:** уникальный идентификатор
   - **Клуб:** выберите клуб из списка
   - **Имя:** полное имя тренера
   - **Специализация:** область деятельности
   - **Опыт:** стаж работы
   - **Фото:** URL изображения
   - **Сертификации:** список сертификатов (через запятую)
   - **Биография:** краткая биография
   - **Расписание:** рабочие часы
4. Нажмите "Создать тренера"

### Управление направлениями

#### Добавление нового направления
1. Перейдите в раздел "Направления" (`/admin/directions`)
2. Нажмите кнопку "Добавить направление"
3. Заполните форму:
   - **ID направления:** уникальный идентификатор
   - **Клуб:** выберите клуб из списка
   - **Название:** название направления
   - **Описание:** подробное описание
   - **Фото:** URL изображения
   - **Цена:** стоимость занятия
   - **Длительность:** продолжительность занятия
   - **Уровень:** уровень сложности
   - **Расписание:** дни и время проведения
   - **Тренер:** ответственный тренер
4. Нажмите "Создать направление"

### Настройки сайта

#### Основные настройки
- **Название сайта:** отображается в заголовке
- **Описание:** мета-описание для SEO
- **Ключевые слова:** для поисковых систем
- **URL сайта:** основной адрес сайта

#### Контактная информация
- **Телефон:** основной контактный телефон
- **Email:** контактный email
- **Адрес:** основной адрес
- **Часы работы:** время работы

#### Социальные сети
- **Instagram:** ссылка на профиль
- **VK:** ссылка на группу
- **Telegram:** ссылка на канал
- **WhatsApp:** номер для связи

## API Endpoints

### Аутентификация
- `POST /api/auth/login` - вход в систему
- `POST /api/auth/logout` - выход из системы
- `GET /api/auth/me` - проверка текущего пользователя

### Управление данными
- `GET /api/clubs` - получить все клубы
- `POST /api/clubs` - создать клуб
- `GET /api/clubs/[id]` - получить клуб по ID
- `PUT /api/clubs/[id]` - обновить клуб
- `DELETE /api/clubs/[id]` - удалить клуб

- `GET /api/trainers` - получить всех тренеров
- `POST /api/trainers` - создать тренера
- `PUT /api/trainers/[id]` - обновить тренера
- `DELETE /api/trainers/[id]` - удалить тренера

- `GET /api/directions` - получить все направления
- `POST /api/directions` - создать направление
- `PUT /api/directions/[id]` - обновить направление
- `DELETE /api/directions/[id]` - удалить направление

- `GET /api/site-config` - получить конфигурацию сайта
- `POST /api/site-config` - обновить конфигурацию

### Публичные API
- `GET /api/public/clubs` - получить клубы для фронтенда
- `GET /api/public/site-config` - получить конфигурацию для фронтенда

## База данных

### Структура таблиц

#### users
- `id` - уникальный идентификатор
- `username` - имя пользователя
- `password` - хешированный пароль
- `role` - роль пользователя
- `created_at` - дата создания

#### clubs
- `id` - уникальный идентификатор клуба
- `name` - название клуба
- `address` - адрес
- `phone` - телефон
- `whatsapp` - WhatsApp ссылка
- `telegram` - Telegram ссылка
- `vk` - VK ссылка
- `instagram` - Instagram ссылка
- `description` - описание
- `photos` - JSON массив фотографий
- `created_at` - дата создания
- `updated_at` - дата обновления

#### trainers
- `id` - уникальный идентификатор тренера
- `club_id` - ID клуба (внешний ключ)
- `name` - имя тренера
- `specialty` - специализация
- `experience` - опыт работы
- `image` - URL фотографии
- `certifications` - JSON массив сертификатов
- `bio` - биография
- `schedule` - JSON массив расписания
- `created_at` - дата создания
- `updated_at` - дата обновления

#### directions
- `id` - уникальный идентификатор направления
- `club_id` - ID клуба (внешний ключ)
- `title` - название направления
- `description` - описание
- `image` - URL изображения
- `price` - цена
- `duration` - продолжительность
- `level` - уровень сложности
- `schedule` - JSON массив расписания
- `trainer` - имя тренера
- `created_at` - дата создания
- `updated_at` - дата обновления

#### site_config
- `id` - уникальный идентификатор
- `key` - ключ конфигурации
- `value` - значение конфигурации (JSON)
- `updated_at` - дата обновления

## Безопасность

### Рекомендации по безопасности
1. **Смените пароль по умолчанию** сразу после первого входа
2. **Используйте HTTPS** в продакшене
3. **Регулярно создавайте резервные копии** базы данных
4. **Ограничьте доступ** к админ панели по IP при необходимости

### Смена пароля
Для смены пароля администратора:
1. Остановите сервер
2. Запустите скрипт смены пароля (требует реализации)
3. Перезапустите сервер

## Резервное копирование

### Создание резервной копии
```bash
# Остановите сервер
# Скопируйте файл базы данных
cp database.sqlite database_backup_$(date +%Y%m%d_%H%M%S).sqlite
```

### Восстановление из резервной копии
```bash
# Остановите сервер
# Замените файл базы данных
cp database_backup_YYYYMMDD_HHMMSS.sqlite database.sqlite
# Перезапустите сервер
```

## Устранение неполадок

### Проблемы с доступом
1. **Не могу войти в админ панель**
   - Проверьте правильность логина и пароля
   - Убедитесь, что сервер запущен
   - Проверьте консоль браузера на ошибки

2. **Ошибка "Database not found"**
   - Запустите миграцию: `npm run migrate`
   - Проверьте права доступа к файлу базы данных

3. **Ошибка "Authentication failed"**
   - Проверьте настройки JWT_SECRET
   - Очистите cookies браузера
   - Попробуйте войти заново

### Проблемы с данными
1. **Данные не отображаются**
   - Проверьте API endpoints
   - Убедитесь, что миграция выполнена успешно
   - Проверьте логи сервера

2. **Ошибки при сохранении**
   - Проверьте формат данных
   - Убедитесь, что все обязательные поля заполнены
   - Проверьте права доступа к базе данных

## Поддержка

При возникновении проблем:
1. Проверьте логи сервера
2. Убедитесь, что все зависимости установлены
3. Проверьте настройки базы данных
4. Обратитесь к разработчику при необходимости

## Обновления

### Миграция данных при обновлении
```bash
# Создайте резервную копию
cp database.sqlite database_backup.sqlite

# Запустите миграцию
npm run migrate

# Проверьте, что все работает корректно
```

---

**Версия документации:** 1.0  
**Дата создания:** $(date)  
**Автор:** FitZone Development Team
